<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì›” ê·¼ë¬´ì‹œê°„ ê³„ì‚°ê¸°</title>
    <!-- GitHub Pagesì—ì„œì˜ ì €ì¥ ë¬¸ì œ í•´ê²°ì„ ìœ„í•œ ë©”íƒ€ íƒœê·¸ ì¶”ê°€ -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <script type="module" src="https://tomashubelbauer.github.io/github-pages-local-storage/index.js"></script>

    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px;
            margin-bottom: 15px;
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 15px;
            font-size: clamp(1.5rem, 4vw, 2rem);
        }
        .input-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            margin-bottom: 12px;
        }
        .input-section {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 15px;
        }
        .input-group {
            display: flex;
            flex-direction: column;
        }
        label {
            font-weight: bold;
            color: #34495e;
            margin-bottom: 6px;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
        }
        input, select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            transition: border-color 0.3s;
        }
        input:focus, select:focus {
            border-color: black !important;
            outline: none;
        }
        /* ì²´í¬ë°•ìŠ¤ ì»¤ìŠ¤í„°ë§ˆì´ì§• */
        input[type="checkbox"] {
            appearance: none;
            width: 16px;
            height: 16px;
            border: 2px solid #ddd;
            border-radius: 3px;
            background-color: white;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            margin-right: 5px;
        }
        
        input[type="checkbox"]:checked {
            background-color: #FF6A0D;
            border-color: #FF6A0D;
        }
        
        input[type="checkbox"]:checked::after {
            content: 'âœ“';
            position: absolute;
            top: -3px;
            left: 1px;
            color: white;
            font-size: 12px;
            font-weight: bold;
        }
        
        input[type="checkbox"]:hover {
            border-color: #FF6A0D;
        }
        
        input[type="checkbox"]:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(255, 106, 13, 0.3);
        }
        
        /* ì²´í¬ë°•ìŠ¤ ê·¸ë£¹ ìŠ¤íƒ€ì¼ ê°œì„  */
        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 8px 0;
            flex-wrap: wrap;
        }
        
        /* ìë™ê³„ì‚° ê°„ê²© ì¼ê´€ì„±ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ */
        .input-spacing {
            margin-top: 8px;
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 600;
            color: #34495e;
            margin-bottom: 0;
        }
        .target-time-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
            margin-bottom: 15px;
        }
        .summary-section {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 10px;
        }
        .summary-item {
            background: white;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            border-left: 4px solid black !important;
        }
        .summary-item h3 {
            margin: 0 0 6px 0;
            color: #2c3e50;
            font-size: clamp(0.8rem, 2vw, 0.9rem);
        }
        .summary-item .value {
            font-size: clamp(1rem, 3vw, 1.2rem);
            font-weight: bold;
            color: black !important;
        }
        .summary-item .minutes-value {
            font-size: clamp(0.8rem, 2.5vw, 0.9rem);
            color: #666;
            font-weight: normal;
        }
        .overtime-section {
            background: #FF6A0D !important;
            background: linear-gradient(135deg, #FF6A0D, #E55A0B) !important;
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(255, 106, 13, 0.3);
        }
        .overtime-section h3 {
            margin: 0 0 15px 0;
            font-size: clamp(1rem, 3vw, 1.2rem);
            font-weight: 600;
        }
        .overtime-section .value {
            font-size: clamp(1.8rem, 6vw, 2.2rem);
            font-weight: bold;
            margin-bottom: 15px;
        }
        .overtime-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin-top: 15px;
        }
        .overtime-input-row {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .overtime-controls label {
            color: white;
            font-weight: bold;
            margin-bottom: 0;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
        }
        .overtime-controls input {
            width: 80px;
            text-align: center;
            border: 2px solid white;
            border-radius: 5px;
            padding: 8px;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
        }
        .average-display {
            color: white;
            font-size: clamp(1rem, 3vw, 1.1rem);
            font-weight: bold;
            margin-top: 10px;
            text-align: center;
            width: 100%;
        }
        .holiday-info {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 6px;
            margin-top: 6px;
            font-size: clamp(0.75rem, 2vw, 0.85rem);
            color: #856404;
            word-break: keep-all;
        }
        .button-group {
            text-align: center;
            margin-bottom: 20px;
        }
        .btn {
            background-color: black !important;
            color: white !important;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: clamp(0.9rem, 2.5vw, 1rem);
            margin: 5px;
            white-space: nowrap;
        }
        .btn:hover {
            background-color: #333 !important;
        }
        .btn-secondary {
            background-color: #666 !important;
            margin-right: 5px;
            margin-bottom: 5px;
        }
        .btn-secondary:hover {
            background-color: #555 !important;
        }
        
        .btn-save {
            background-color: black !important;
            margin-left: 5px;
        }
        
        /* í…Œì´ë¸” ë°˜ì‘í˜• */
        .table-container {
            overflow-x: auto;
            margin: 0 -15px;
            padding: 0 15px;
        }
        table {
            width: 100%;
            min-width: 600px;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 8px;
            text-align: center;
            border: 1px solid #ddd;
            font-size: clamp(0.8rem, 2vw, 0.9rem);
        }
        th {
            background-color: black !important;
            color: white !important;
            font-weight: bold;
            position: sticky;
            top: 0;
        }
        .date-col { width: 70px; }
        .day-col { width: 50px; }
        .input-col { width: 110px; }
        .result-col { width: 90px; }
        
        /* í…Œì´ë¸” ì…ë ¥ í•„ë“œ */
        .table-input {
            width: 45px !important;
            padding: 4px !important;
            font-size: clamp(0.8rem, 2vw, 0.9rem) !important;
            border: 1px solid #ddd !important;
            border-radius: 3px !important;
        }
        
        .positive { color: #27ae60; }
        .negative { color: #e74c3c; }
        .zero { color: #7f8c8d; }
        .holiday { 
            color: #e74c3c;
            font-weight: bold;
        }
        .formula-display {
            font-size: clamp(0.75rem, 2vw, 0.85rem);
            color: #7f8c8d;
            margin-top: 4px;
            font-style: italic;
            word-break: keep-all;
        }
        
        /* ëª¨ë°”ì¼ ìµœì í™” */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            .container {
                padding: 10px;
                margin-bottom: 10px;
            }
            .input-section {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            .target-time-section {
                grid-template-columns: 1fr;
                gap: 12px;
            }
            .summary-grid {
                grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
                gap: 10px;
            }
            .overtime-section {
                padding: 15px;
                margin-bottom: 20px;
            }
            .overtime-controls {
                flex-direction: column;
                gap: 8px;
            }
            .overtime-controls input {
                width: 100px;
            }
            .btn {
                padding: 8px 12px;
                margin: 3px;
            }
            
            /* ì‘ì€ í™”ë©´ì—ì„œëŠ” í…Œì´ë¸”ì„ ì¹´ë“œ í˜•íƒœë¡œ ë³€í™˜ */
            .table-mobile {
                display: none;
            }
            .button-group {
                margin-bottom: 15px;
            }
            .button-group > div {
                flex-direction: column;
                align-items: stretch;
            }
            .button-group > div > div {
                text-align: center !important;
                margin: 0 0 10px 0 !important;
            }
            .button-group button {
                width: 100%;
                margin: 0 0 8px 0 !important;
            }
            .btn-secondary, .btn-save {
                margin: 0 0 8px 0 !important;
            }
            .auto-save-hint {
                text-align: center !important;
            }
            .table-hint-container {
                justify-content: center;
                margin: 10px 0;
            }
        }
        
        @media (max-width: 480px) {
            h1 {
                margin-bottom: 15px;
            }
            .summary-grid {
                grid-template-columns: 1fr;
            }
            table {
                min-width: 550px;
            }
            .table-input {
                width: 35px !important;
            }
        }
        
        /* ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ ì¡°ì •ì„ ìœ„í•œ ìŠ¤íƒ€ì¼ */
        @media (min-width: 768px) {
            .target-hours-container {
                position: relative;
            }
            
            .auto-calc-checkbox {
                margin-top: 8px;
            }
        }
        
        /* ëª¨ë°”ì¼ ì „ìš© í‘œì‹œ í´ë˜ìŠ¤ */
        @media (max-width: 767px) {
            .auto-calc-checkbox.pc-only {
                display: none !important;
            }
            .overtime-flex-boxes {
                flex-direction: column !important;
            }
        }
        
        @media (min-width: 768px) {
            .auto-calc-checkbox.mobile-only {
                display: none !important;
            }
        }
        .average-minutes {
            font-weight: 700;
            color: white;
            text-decoration: underline;
        }
        .auto-save-hint {
            font-size: 12px; 
            color: #777; 
            margin-top: 5px; 
            text-align: right;
        }
        
        .table-hint-container {
            display: flex; 
            justify-content: flex-end; 
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <h1>â±ï¸ ì›” ê·¼ë¬´ì‹œê°„ ê³„ì‚°ê¸°</h1>
    <div style="background: #fff; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.07); padding: 18px 18px 12px 18px; margin-bottom: 18px; color: #444; font-size: 15px;">
        <b>ì›” ê·¼ë¬´ì‹œê°„ ê³„ì‚°ê¸°</b>ëŠ” í•œ ë‹¬ ë™ì•ˆì˜ ê·¼ë¬´ì¼ìˆ˜ì™€ í•„ìˆ˜ ê·¼ë¬´ì‹œê°„, ê·¸ë¦¬ê³  ì¼ë³„ ì‹¤ì œ ê·¼ë¬´ì‹œê°„ì„ ì‰½ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ë„êµ¬ì…ë‹ˆë‹¤.<br>
        <ul style="margin: 8px 0 0 18px; padding: 0; font-size: 14px;">
            <li>ìƒë‹¨ì—ì„œ ì—°ë„ì™€ ì›”ì„ ì„ íƒí•˜ë©´ í•´ë‹¹ ì›”ì˜ ê·¼ë¬´ì¼ìˆ˜ì™€ í•„ìˆ˜ ê·¼ë¬´ì‹œê°„ì´ ìë™ ê³„ì‚°ë©ë‹ˆë‹¤.</li>
            <li>ê·¼ë¬´ì¼ë³„ë¡œ ì‹¤ì œ ê·¼ë¬´ì‹œê°„(ì‹œê°„:ë¶„)ì„ ì…ë ¥í•˜ë©´, ì´ˆê³¼/ë¯¸ë‹¬ ì‹œê°„ì´ ìë™ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤.</li>
            <li>ì—°ì°¨ë¥¼ ì‚¬ìš©í•œ ê²½ìš°ì—ë„, ì—°ì°¨ ì‚¬ìš© ì‹œê°„(ì˜ˆ: 8ì‹œê°„)ì„ í•´ë‹¹ ë‚ ì§œì˜ ê·¼ë¬´ì‹œê°„ìœ¼ë¡œ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤.</li>
        </ul>
    </div>

    <div class="container">
        <!-- ê¸°ë³¸ ì„¤ì • ì„¹ì…˜ -->
        <div class="input-section">
            <!-- ì—°ë„ì™€ ì›” ì„ íƒ (ì²« ë²ˆì§¸ ì¤„) -->
            <div class="input-row">
                <div class="input-group">
                    <label for="targetYear">ì—°ë„</label>
                    <select id="targetYear"></select>
                </div>
                <div class="input-group">
                    <label for="targetMonth">ì›”</label>
                    <select id="targetMonth">
                        <option value="1">1ì›”</option>
                        <option value="2">2ì›”</option>
                        <option value="3">3ì›”</option>
                        <option value="4">4ì›”</option>
                        <option value="5">5ì›”</option>
                        <option value="6">6ì›”</option>
                        <option value="7">7ì›”</option>
                        <option value="8">8ì›”</option>
                        <option value="9">9ì›”</option>
                        <option value="10">10ì›”</option>
                        <option value="11">11ì›”</option>
                        <option value="12">12ì›”</option>
                    </select>
                </div>
            </div>
            
            <!-- ì›” ê·¼ë¬´ì¼ìˆ˜ (ë‘ ë²ˆì§¸ ì¤„) -->
            <div class="input-row">
                <div class="input-group">
                    <label for="workDays">ì›” ê·¼ë¬´ì¼ìˆ˜</label>
                    <input type="number" id="workDays" value="19" min="1" step="1" readonly>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="autoCalculate" checked>
                            ìë™ ê³„ì‚°
                        </label>
                    </div>
                    <div class="holiday-info" id="holidayInfo"></div>
                </div>
            </div>
            
            <!-- ì›” í•„ìˆ˜ ê·¼ë¬´ì‹œê°„ (ì„¸ ë²ˆì§¸ ì¤„) -->
            <div class="input-row">
                <div class="input-group target-hours-container" style="grid-column: 1 / span 2;">
                    <label for="targetHours">ì›” í•„ìˆ˜ ê·¼ë¬´ì‹œê°„</label>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <input type="number" id="targetHours" value="153" min="0" step="1" style="width: 80px;"> ì‹œê°„
                        <input type="number" id="targetMinutes" value="6" min="0" max="59" step="1" style="width: 80px;"> ë¶„
                    </div>
                    <!-- PC/íƒœë¸”ë¦¿ì—ì„œë§Œ í‘œì‹œ -->
                    <div class="checkbox-group auto-calc-checkbox pc-only">
                        <label class="checkbox-label">
                            <input type="checkbox" id="autoCalculateTarget" checked>
                            ìë™ ê³„ì‚°
                        </label>
                    </div>
                    <!-- ëª¨ë°”ì¼ì—ì„œë§Œ í‘œì‹œ -->
                    <div class="checkbox-group auto-calc-checkbox mobile-only">
                        <label class="checkbox-label">
                            <input type="checkbox" id="autoCalculateTarget" checked>
                            ìë™ ê³„ì‚°
                        </label>
                    </div>
                    <div class="formula-display" id="targetFormula">
                        40ì‹œê°„ Ã— (31ì¼/7ì¼) - (3ì¼Ã—8ì‹œê°„) = 153ì‹œê°„ 6ë¶„
                    </div>
                </div>
            </div>
        </div>

        <!-- ìš”ì•½ ì •ë³´ ì„¹ì…˜ -->
        <div class="summary-section">
            <div class="summary-grid">
                <div class="summary-item">
                    <h3>ì›” í•„ìˆ˜ ê·¼ë¬´ì‹œê°„</h3>
                    <div class="value" id="totalTarget">153ì‹œê°„ 6ë¶„</div>
                    <div class="minutes-value" id="totalMinutesDisplay">(9,186ë¶„)</div>
                </div>
                <div class="summary-item">
                    <h3>ì¼ í‰ê·  í•„ìš” ê·¼ë¬´ì‹œê°„</h3>
                    <div class="value" id="dailyAverage">8ì‹œê°„ 4ë¶„</div>
                    <div class="minutes-value" id="dailyAverageMinutes">(484ë¶„)</div>
                </div>
            </div>
        </div>

        <!-- ì›”/ì¼ ì •ë³´ ë°•ìŠ¤ ë¶„ë¦¬ -->
        <div class="overtime-flex-boxes" style="display: flex; gap: 16px; margin-bottom: 20px;">
            <!-- ì›” ì •ë³´: ì£¼í™©ìƒ‰ ë°•ìŠ¤ -->
            <div style="flex:1; background: linear-gradient(135deg, #FF6A0D, #E55A0B); color: #fff; border-radius: 12px; padding: 22px 18px; font-weight: bold; font-size: 1.7rem; display: flex; align-items: center; justify-content: center; min-width: 0;">
                <div id="monthlyOvertime" style="text-align:center; width:100%">ğŸ”¥ ì´ë²ˆ ë‹¬ì€ 66ë¶„ ë” ê·¼ë¬´í•´ì•¼ í•©ë‹ˆë‹¤. (ê¸°ë³¸ 8ì‹œê°„/ì¼ ê¸°ì¤€)</div>
            </div>
            <!-- ì¼ ì •ë³´: ê²€ì€ìƒ‰ ë°•ìŠ¤ -->
            <div style="flex:1; background: #222; color: #fff; border-radius: 12px; padding: 22px 18px; min-width: 0;">
                <div class="overtime-controls" style="margin-bottom: 10px;">
                    <div class="overtime-input-row" style="margin-bottom: 10px;">
                        <label for="remainingDays" style="font-size:1rem;">ë‚¨ì€ ê·¼ë¬´ì¼ìˆ˜:</label>
                        <input type="number" id="remainingDays" value="0" min="0" max="31" onchange="validateRemainingDays()" onkeyup="validateRemainingDays()" style="width: 60px; margin: 0 8px;">
                        <button class="btn" onclick="calculateRemainingWorkdays()" style="padding: 5px 8px;">ì˜¤ëŠ˜ í¬í•¨ ìë™ ê³„ì‚°</button>
                    </div>
                </div>
                <div class="average-display" id="averageOvertime" style="font-size:1.1rem; color:#fff;">ğŸ’ª í•˜ë£¨ í‰ê·  6ë¶„ ë” ê·¼ë¬´ í•„ìš”<br><span style="font-size:12px;color:#bbb;">(ê¸°ë³¸ 8ì‹œê°„/ì¼ ê¸°ì¤€)</span></div>
            </div>
        </div>

        <!-- ë²„íŠ¼ ê·¸ë£¹ ì´ë™ ë° í…ìŠ¤íŠ¸ ë³€ê²½ -->
        <div style="margin-bottom: 20px;" class="button-group">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 10px;">
                <div style="text-align: left;">
                    <button class="btn btn-secondary" onclick="resetAll()">ì´ë²ˆ ë‹¬ ê·¼ë¬´ì‹œê°„ ì´ˆê¸°í™”</button>
                </div>
            </div>
        </div>

        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th class="date-col">ë‚ ì§œ</th>
                        <th class="day-col">ìš”ì¼</th>
                        <th class="input-col">ì‹¤ì œ ê·¼ë¬´ì‹œê°„<br>(ì‹œê°„:ë¶„)</th>
                        <th class="result-col">ì´ˆê³¼/ë¯¸ë‹¬<br>(ë¶„)</th>
                        <th class="result-col">ë‚¨ì€ ì´ˆê³¼ê·¼ë¬´<br>(ë¶„)</th>
                    </tr>
                </thead>
                <tbody id="workTable">
                </tbody>
                <tfoot>
                    <tr style="background-color: #f8f9fa; font-weight: bold;">
                        <td colspan="2">í•©ê³„</td>
                        <td id="totalActual">0ì‹œê°„ 0ë¶„</td>
                        <td id="totalDiff" class="zero">0ë¶„</td>
                        <td></td>
                    </tr>
                </tfoot>
            </table>
        </div>
    </div>

    <!-- ë²„ì „ ì •ë³´ ë° ìµœì¢… ìˆ˜ì •ì¼ í‘œì‹œ -->
    <div style="margin-top: 30px; padding-bottom: 20px; font-size: 11px; color: #999; opacity: 0.7; text-align: left;">
        v1.0.5 (ìµœì¢… ìˆ˜ì •: 2025-05-16 10:47:00)
    </div>

    <script>
        const BASIC_WORK_MINUTES = 480;
        const DAY_NAMES = ['ì¼', 'ì›”', 'í™”', 'ìˆ˜', 'ëª©', 'ê¸ˆ', 'í† '];

        const KOREAN_HOLIDAYS = {
            fixed: [
                { month: 1, day: 1, name: 'ì‹ ì •' },
                { month: 3, day: 1, name: 'ì‚¼ì¼ì ˆ' },
                { month: 5, day: 1, name: 'ê·¼ë¡œìì˜ ë‚ ' },
                // 5ì›” 5ì¼ ì–´ë¦°ì´ë‚ ì€ yearlyì—ì„œ íŠ¹ë³„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì£¼ì„ ì²˜ë¦¬
                // { month: 5, day: 5, name: 'ì–´ë¦°ì´ë‚ ' },
                { month: 6, day: 6, name: 'í˜„ì¶©ì¼' },
                { month: 8, day: 15, name: 'ê´‘ë³µì ˆ' },
                { month: 10, day: 3, name: 'ê°œì²œì ˆ' },
                { month: 10, day: 9, name: 'í•œê¸€ë‚ ' },
                { month: 12, day: 25, name: 'ì„±íƒ„ì ˆ' }
            ],
            yearly: {
                2025: [
                    { month: 1, day: 27, name: 'ì„ì‹œê³µíœ´ì¼' },
                    { month: 1, day: 28, name: 'ì„¤ë‚  ì—°íœ´' },
                    { month: 1, day: 29, name: 'ì„¤ë‚ ' },
                    { month: 1, day: 30, name: 'ì„¤ë‚  ì—°íœ´' },
                    { month: 3, day: 3, name: 'ëŒ€ì²´íœ´ì¼' },
                    { month: 5, day: 5, name: 'ì–´ë¦°ì´ë‚ /ë¶€ì²˜ë‹˜ ì˜¤ì‹  ë‚ ' },
                    { month: 5, day: 6, name: 'ëŒ€ì²´íœ´ì¼' },
                    { month: 6, day: 3, name: 'ëŒ€í†µë ¹ì„ ê±°' },
                    { month: 10, day: 6, name: 'ì¶”ì„' },
                    { month: 10, day: 7, name: 'ì¶”ì„ ì—°íœ´' },
                    { month: 10, day: 8, name: 'ëŒ€ì²´íœ´ì¼' }
                ],
                2026: [
                    { month: 2, day: 16, name: 'ì„¤ ì—°íœ´' },
                    { month: 2, day: 17, name: 'ì„¤ë‚ ' },
                    { month: 2, day: 18, name: 'ì„¤ ì—°íœ´' },
                    { month: 3, day: 2, name: 'ëŒ€ì²´ íœ´ì¼' },
                    { month: 3, day: 24, name: 'ë¶€ì²˜ë‹˜ ì˜¤ì‹  ë‚ ' },
                    { month: 3, day: 25, name: 'ëŒ€ì²´ íœ´ì¼' },
                    { month: 8, day: 17, name: 'ëŒ€ì²´ íœ´ì¼' },
                    { month: 9, day: 24, name: 'ì¶”ì„ ì—°íœ´' },
                    { month: 9, day: 25, name: 'ì¶”ì„' },
                    { month: 9, day: 26, name: 'ì¶”ì„ ì—°íœ´' },
                    { month: 10, day: 5, name: 'ëŒ€ì²´ íœ´ì¼' }
                ],
                2027: [
                    { month: 2, day: 6, name: 'ì„¤ë‚  ì—°íœ´' },
                    { month: 2, day: 7, name: 'ì„¤ë‚ ' },
                    { month: 2, day: 8, name: 'ì„¤ë‚  ì—°íœ´' },
                    { month: 2, day: 9, name: 'ëŒ€ì²´ íœ´ì¼' },
                    { month: 5, day: 13, name: 'ë¶€ì²˜ë‹˜ ì˜¤ì‹  ë‚ ' },
                    { month: 8, day: 16, name: 'ëŒ€ì²´ íœ´ì¼' },
                    { month: 9, day: 14, name: 'ì¶”ì„ ì—°íœ´' },
                    { month: 9, day: 15, name: 'ì¶”ì„' },
                    { month: 9, day: 16, name: 'ì¶”ì„ ì—°íœ´' },
                    { month: 10, day: 4, name: 'ëŒ€ì²´ íœ´ì¼' },
                    { month: 10, day: 11, name: 'ëŒ€ì²´ íœ´ì¼' },
                    { month: 12, day: 27, name: 'ëŒ€ì²´ íœ´ì¼' }
                ]
            }
        };

        let currentMonthlyOvertimeMinutes = 0;

        // ê·¼ë¬´ì‹œê°„ ì…ë ¥ê°’ì„ í•­ìƒ localStorageì— ì €ì¥/ë³µì›í•˜ëŠ” ë‹¨ìˆœí™”ëœ êµ¬ì¡°
        function saveAllWorkInputs() {
            const rows = document.getElementById('workTable').rows;
            const data = [];
            for (let i = 0; i < rows.length; i++) {
                const timeCell = rows[i].cells[2];
                const inputs = timeCell.getElementsByTagName('input');
                if (inputs.length >= 2) {
                    data.push({
                        hours: inputs[0].value,
                        minutes: inputs[1].value
                    });
                } else {
                    data.push(null); // íœ´ì¼ ë“± ì…ë ¥ë€ ì—†ëŠ” ê²½ìš°
                }
            }
            localStorage.setItem('allWorkInputs', JSON.stringify(data));
        }

        function loadAllWorkInputs() {
            const data = JSON.parse(localStorage.getItem('allWorkInputs') || '[]');
            const rows = document.getElementById('workTable').rows;
            for (let i = 0; i < rows.length; i++) {
                if (!data[i]) continue;
                const timeCell = rows[i].cells[2];
                const inputs = timeCell.getElementsByTagName('input');
                if (inputs.length >= 2) {
                    inputs[0].value = data[i].hours;
                    inputs[1].value = data[i].minutes;
                }
            }
        }

        // í…Œì´ë¸” ê°±ì‹  í›„ ìë™ ë³µì› ë° ìƒë‹¨ ì •ë³´ ê°±ì‹ 
        function updateTableAndRestore() {
            calculateWorkDays();
            calculateTargetHours();
            updateCalculations();
            updateTable();
            loadAllWorkInputs();
            calculateTotals();
        }

        // ê¸°ì¡´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì— ì €ì¥/ë³µì› ë° ìë™ê³„ì‚° ë¦¬ìŠ¤ë„ˆ ì—°ê²°
        function addAutoSaveListeners() {
            document.getElementById('targetYear').addEventListener('change', updateTableAndRestore);
            document.getElementById('targetMonth').addEventListener('change', updateTableAndRestore);
            // ìë™ê³„ì‚° ê´€ë ¨ ë¦¬ìŠ¤ë„ˆ ë³µì›
            document.getElementById('autoCalculateTarget').addEventListener('change', () => {
                const autoCalculateTarget = document.getElementById('autoCalculateTarget').checked;
                const targetHoursInput = document.getElementById('targetHours');
                const targetMinutesInput = document.getElementById('targetMinutes');
                targetHoursInput.readOnly = autoCalculateTarget;
                targetMinutesInput.readOnly = autoCalculateTarget;
                if (autoCalculateTarget) {
                    calculateTargetHours();
                } else {
                    document.getElementById('targetFormula').textContent = 'ìˆ˜ë™ ì…ë ¥ ëª¨ë“œ';
                }
            });
            document.getElementById('autoCalculate').addEventListener('change', () => {
                const autoCalculate = document.getElementById('autoCalculate').checked;
                const workDaysInput = document.getElementById('workDays');
                if (autoCalculate) {
                    calculateWorkDays();
                } else {
                    workDaysInput.readOnly = false;
                }
            });
        }

        // ì…ë ¥ë€ ë³€ê²½ ì‹œë§ˆë‹¤ ì €ì¥
        function addInputAutoSave() {
            document.addEventListener('input', function(e) {
                if (e.target.classList.contains('hours-input') || e.target.classList.contains('minutes-input')) {
                    saveAllWorkInputs();
                }
            });
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ
        addAutoSaveListeners();
        addInputAutoSave();
        updateTableAndRestore();

        function isHoliday(year, month, day) {
            // ë¨¼ì € ì—°ë„ë³„ ê³µíœ´ì¼ í™•ì¸ (ìš°ì„ ìˆœìœ„ ë†’ìŒ)
            if (KOREAN_HOLIDAYS.yearly[year]) {
                for (const holiday of KOREAN_HOLIDAYS.yearly[year]) {
                    if (holiday.month === month && holiday.day === day) {
                        return holiday.name;
                    }
                }
            }
            
            // ê·¸ ë‹¤ìŒ ê³ ì • ê³µíœ´ì¼ í™•ì¸
            for (const holiday of KOREAN_HOLIDAYS.fixed) {
                if (holiday.month === month && holiday.day === day) {
                    return holiday.name;
                }
            }
            
            return null;
        }

        function calculateTargetHours() {
            const year = parseInt(document.getElementById('targetYear').value);
            const month = parseInt(document.getElementById('targetMonth').value);
            const autoCalculateTarget = document.getElementById('autoCalculateTarget').checked;
            
            if (!autoCalculateTarget) return;

            const daysInMonth = new Date(year, month, 0).getDate();
            const holidayDates = new Set();
            let holidayList = [];
            
            for (const holiday of KOREAN_HOLIDAYS.fixed) {
                if (holiday.month === month) {
                    const date = new Date(year, month - 1, holiday.day);
                    const dayOfWeek = date.getDay();
                    if (dayOfWeek !== 0 && dayOfWeek !== 6) {
                        holidayDates.add(holiday.day);
                        holidayList.push(holiday.name);
                    }
                }
            }
            
            if (KOREAN_HOLIDAYS.yearly[year]) {
                for (const holiday of KOREAN_HOLIDAYS.yearly[year]) {
                    if (holiday.month === month) {
                        const date = new Date(year, month - 1, holiday.day);
                        const dayOfWeek = date.getDay();
                        if (dayOfWeek !== 0 && dayOfWeek !== 6 && !holidayDates.has(holiday.day)) {
                            holidayDates.add(holiday.day);
                            holidayList.push(holiday.name);
                        }
                    }
                }
            }
            
            const holidayDays = holidayDates.size;
            const totalWorkMinutes = Math.floor((40 * daysInMonth / 7) * 60);
            const holidayMinutes = holidayDays * 8 * 60;
            const finalMinutes = totalWorkMinutes - holidayMinutes;
            const roundedMinutes = Math.round(finalMinutes / 6) * 6;
            
            const hours = Math.floor(roundedMinutes / 60);
            const minutes = roundedMinutes % 60;
            
            document.getElementById('targetHours').value = hours;
            document.getElementById('targetMinutes').value = minutes;
            
            const formula = `40ì‹œê°„ Ã— (${daysInMonth}ì¼/7ì¼) - (${holidayDays}ì¼Ã—8ì‹œê°„) = ${hours}ì‹œê°„ ${minutes}ë¶„`;
            document.getElementById('targetFormula').textContent = formula;
            
            updateCalculations();
        }

        function calculateWorkDays() {
            const year = parseInt(document.getElementById('targetYear').value);
            const month = parseInt(document.getElementById('targetMonth').value);
            const autoCalculate = document.getElementById('autoCalculate').checked;
            
            if (!autoCalculate) {
                // ìë™ ê³„ì‚°ì´ êº¼ì ¸ ìˆìœ¼ë©´ workDays ì…ë ¥ í•„ë“œë¥¼ í¸ì§‘ ê°€ëŠ¥í•˜ê²Œ ì„¤ì •
                document.getElementById('workDays').readOnly = false;
                return;
            }

            const daysInMonth = new Date(year, month, 0).getDate();
            let workDays = 0;
            let holidays = [];
            let weekends = 0;

            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month - 1, day);
                const dayOfWeek = date.getDay();
                
                if (dayOfWeek === 0 || dayOfWeek === 6) {
                    weekends++;
                    continue;
                }
                
                const holiday = isHoliday(year, month, day);
                if (holiday) {
                    holidays.push(`${day}ì¼(${holiday})`);
                    continue;
                }
                
                workDays++;
            }

            document.getElementById('workDays').value = workDays;
            document.getElementById('workDays').readOnly = true;

            let holidayInfo = `ì£¼ë§: ${weekends}ì¼`;
            if (holidays.length > 0) {
                holidayInfo += `, ê³µíœ´ì¼: ${holidays.join(', ')}`;
            }
            document.getElementById('holidayInfo').textContent = holidayInfo;

            updateCalculations();
            
            // ì´ë²ˆ ë‹¬ì´ ì•„ë‹Œ ê²½ìš°, ìë™ìœ¼ë¡œ ë‚¨ì€ ê·¼ë¬´ì¼ìˆ˜ ì„¤ì •
            autoCalculateRemainingDays();
        }

        function updateTable() {
            const year = parseInt(document.getElementById('targetYear').value);
            const month = parseInt(document.getElementById('targetMonth').value);
            const table = document.getElementById('workTable');
            
            table.innerHTML = '';
            
            const daysInMonth = new Date(year, month, 0).getDate();
            
            for (let day = 1; day <= daysInMonth; day++) {
                const date = new Date(year, month - 1, day);
                const dayOfWeek = date.getDay();
                const dayName = DAY_NAMES[dayOfWeek];
                
                const holiday = isHoliday(year, month, day);
                const isWeekendOrHoliday = (dayOfWeek === 0 || dayOfWeek === 6 || holiday);
                
                const row = table.insertRow();
                
                const dateCell = row.insertCell();
                dateCell.textContent = `${month}/${day}`;
                if (isWeekendOrHoliday) dateCell.className = 'holiday';
                
                const dayCell = row.insertCell();
                dayCell.textContent = dayName;
                if (isWeekendOrHoliday) dayCell.className = 'holiday';
                
                const timeCell = row.insertCell();
                if (isWeekendOrHoliday) {
                    timeCell.textContent = holiday || 'íœ´ì¼';
                    timeCell.className = 'holiday';
                } else {
                    timeCell.innerHTML = `
                        <input type="number" min="0" max="24" step="1" value="8" class="table-input hours-input" onchange="validateTimeInput(this, true)" oninput="validateTimeInput(this, true)">:
                        <input type="number" min="0" max="59" step="1" value="00" class="table-input minutes-input" onchange="validateTimeInput(this, false)" oninput="validateTimeInput(this, false)">
                    `;
                }
                
                const diffCell = row.insertCell();
                diffCell.className = 'zero';
                diffCell.textContent = isWeekendOrHoliday ? '-' : '0ë¶„';
                
                const remainingCell = row.insertCell();
                remainingCell.className = 'zero';
                remainingCell.textContent = '0ë¶„';
            }
            
            // ì…ë ¥ í•„ë“œì— ìœ íš¨ì„± ê²€ì‚¬ ì ìš©
            applyTimeValidation();
            calculateTotals();
        }

        function calculateRemainingAverage(remainingOvertimeMinutes) {
            const remainingDays = parseInt(document.getElementById('remainingDays').value) || 0;
            const CORE_TIME_MINUTES = 360; // 6ì‹œê°„

            if (remainingDays > 0) {
                if (remainingOvertimeMinutes > 0) {
                    const averageMinutes = Math.round(remainingOvertimeMinutes / remainingDays);
                    document.getElementById('averageOvertime').innerHTML =
                        `ğŸ’ª í•˜ë£¨ í‰ê·  <span class="average-minutes">${averageMinutes}ë¶„</span> ë” ê·¼ë¬´ í•„ìš”<br><span style="font-size:12px;color:#bbb;">(ê¸°ë³¸ 8ì‹œê°„/ì¼ ê¸°ì¤€)</span>`;
                } else if (remainingOvertimeMinutes < 0) {
                    let averageEarlyLeave = Math.floor(Math.abs(remainingOvertimeMinutes) / remainingDays);
                    const maxEarlyLeave = 480 - CORE_TIME_MINUTES;
                    if (averageEarlyLeave > maxEarlyLeave) averageEarlyLeave = maxEarlyLeave;
                    document.getElementById('averageOvertime').innerHTML =
                        `ğŸ˜ í•˜ë£¨ í‰ê·  <span class="average-minutes">${averageEarlyLeave}ë¶„</span> ì¼ì° í‡´ê·¼ ê°€ëŠ¥<br><span style="font-size:12px;color:#bbb;">(ê¸°ë³¸ 8ì‹œê°„/ì¼ ê¸°ì¤€)<br>*ë‹¨, ì½”ì–´íƒ€ì„ 6ì‹œê°„(ì˜¤ì „ 10:30 ~ ì˜¤í›„ 5:30)ì€ í•„ìˆ˜ë¡œ ê·¼ë¬´í•´ì•¼ í•©ë‹ˆë‹¤.</span>`;
                } else {
                    document.getElementById('averageOvertime').innerHTML =
                        `ğŸ’ª í•˜ë£¨ í‰ê·  <span class="average-minutes">0ë¶„</span> ì¶”ê°€ ê·¼ë¬´ í•„ìš” ì—†ìŒ<br><span style="font-size:12px;color:#bbb;">(ê¸°ë³¸ 8ì‹œê°„/ì¼ ê¸°ì¤€)</span>`;
                }
            } else {
                document.getElementById('averageOvertime').innerHTML =
                    `ğŸ’ª í•˜ë£¨ í‰ê·  <span class="average-minutes">0ë¶„</span> ì¶”ê°€ ê·¼ë¬´ í•„ìš” ì—†ìŒ<br><span style="font-size:12px;color:#bbb;">(ê¸°ë³¸ 8ì‹œê°„/ì¼ ê¸°ì¤€)</span>`;
            }
            saveAllWorkInputs();
        }

        function calculateAll() {
            // ê·¼ë¬´ì‹œê°„ ë°ì´í„° ë¨¼ì € ì €ì¥
            saveAllWorkInputs();
            
            // í•„ìš”í•œ ê³„ì‚° ìˆ˜í–‰
            calculateWorkDays();
            calculateTargetHours();
            updateCalculations();
            
            // ê·¼ë¬´ì‹œê°„ ë°ì´í„° ë³µì›
            loadAllWorkInputs();
            
            // í…Œì´ë¸” ì¬ê³„ì‚°
            calculateTotals();
            
            // ë³€ê²½ì‚¬í•­ ì €ì¥
            saveAllWorkInputs();
        }

        function updateCalculations() {
            const targetHours = parseInt(document.getElementById('targetHours').value) || 0;
            const targetMinutes = parseInt(document.getElementById('targetMinutes').value) || 0;
            const workDays = parseInt(document.getElementById('workDays').value) || 1;

            const totalTargetMinutes = targetHours * 60 + targetMinutes;
            const dailyAverageMinutes = Math.round(totalTargetMinutes / workDays);
            const dailyAverageHours = Math.floor(dailyAverageMinutes / 60);
            const dailyAverageRemainingMinutes = dailyAverageMinutes % 60;
            
            const totalBasicMinutes = workDays * BASIC_WORK_MINUTES;
            currentMonthlyOvertimeMinutes = totalTargetMinutes - totalBasicMinutes;

            document.getElementById('totalTarget').textContent = `${targetHours}ì‹œê°„ ${targetMinutes}ë¶„`;
            document.getElementById('totalMinutesDisplay').textContent = `(${totalTargetMinutes.toLocaleString()}ë¶„)`;
            document.getElementById('dailyAverage').textContent = `${dailyAverageHours}ì‹œê°„ ${dailyAverageRemainingMinutes}ë¶„`;
            document.getElementById('dailyAverageMinutes').textContent = `(${dailyAverageMinutes}ë¶„)`;
            document.getElementById('monthlyOvertime').textContent = currentMonthlyOvertimeMinutes + 'ë¶„';
            
            // ë‚¨ì€ ê·¼ë¬´ì¼ìˆ˜ ì…ë ¥ í•„ë“œì˜ ìµœëŒ€ê°’ì„ í•´ë‹¹ ì›”ì˜ ì¼ìˆ˜ë¡œ ì œí•œ
            const year = parseInt(document.getElementById('targetYear').value);
            const month = parseInt(document.getElementById('targetMonth').value);
            const daysInMonth = new Date(year, month, 0).getDate();
            document.getElementById('remainingDays').max = daysInMonth;
            
            // ë§Œì•½ í˜„ì¬ ì„¤ì •ëœ ê°’ì´ í•´ë‹¹ ì›”ì˜ ì¼ìˆ˜ë³´ë‹¤ í¬ë©´ ì¡°ì •
            const remainingDays = parseInt(document.getElementById('remainingDays').value) || 0;
            if (remainingDays > daysInMonth) {
                document.getElementById('remainingDays').value = daysInMonth;
                calculateRemainingAverage(currentMonthlyOvertimeMinutes);
            }

            updateTable();
        }

        function calculateTotals() {
            const workDays = parseInt(document.getElementById('workDays').value) || 1;
            const targetHours = parseInt(document.getElementById('targetHours').value) || 0;
            const targetMinutes = parseInt(document.getElementById('targetMinutes').value) || 0;
            const totalTargetMinutes = targetHours * 60 + targetMinutes;

            let remainingOvertimeMinutes = currentMonthlyOvertimeMinutes;
            let totalActualMinutes = 0;
            
            const rows = document.getElementById('workTable').rows;
            
            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                const timeCell = row.cells[2];
                const inputs = timeCell.getElementsByTagName('input');
                
                if (inputs.length >= 2) {
                    const hourInput = inputs[0];
                    const minuteInput = inputs[1];
                    
                    // ì…ë ¥ê°’ ìœ íš¨ì„± ê²€ì‚¬ ë° ì œí•œ
                    let hours = parseInt(hourInput.value) || 0;
                    let minutes = parseInt(minuteInput.value) || 0;
                    
                    // 24ì‹œê°„ì¸ ê²½ìš° ë¶„ì€ ë¬´ì¡°ê±´ 0
                    if (hours === 24) {
                        minutes = 0;
                        minuteInput.value = "00";
                        minuteInput.disabled = true;
                    }
                    
                    const actualMinutes = hours * 60 + minutes;
                    
                    totalActualMinutes += actualMinutes;
                    
                    const dailyOvertimeDiff = actualMinutes - BASIC_WORK_MINUTES;
                    remainingOvertimeMinutes -= dailyOvertimeDiff;
                    
                    const diffCell = row.cells[3];
                    if (dailyOvertimeDiff > 0) {
                        diffCell.textContent = `+${dailyOvertimeDiff}ë¶„`;
                        diffCell.className = 'positive';
                    } else if (dailyOvertimeDiff < 0) {
                        diffCell.textContent = `${dailyOvertimeDiff}ë¶„`;
                        diffCell.className = 'negative';
                    } else {
                        diffCell.textContent = '0ë¶„';
                        diffCell.className = 'zero';
                    }
                    
                    const remainingCell = row.cells[4];
                    if (remainingOvertimeMinutes > 0) {
                        remainingCell.textContent = `${Math.round(remainingOvertimeMinutes)}ë¶„`;
                        remainingCell.className = 'negative';
                    } else if (remainingOvertimeMinutes < 0) {
                        remainingCell.textContent = `${Math.abs(Math.round(remainingOvertimeMinutes))}ë¶„`;
                        remainingCell.className = 'positive';
                    } else {
                        remainingCell.textContent = '0ë¶„';
                        remainingCell.className = 'zero';
                    }
                }
            }
            
            // ë‚¨ì€ ì´ˆê³¼ê·¼ë¬´ì‹œê°„ ì•ˆë‚´ë¬¸êµ¬(ì´ëª¨ì§€+í…ìŠ¤íŠ¸ ë¶„ë¦¬)ë¡œë§Œ ì—…ë°ì´íŠ¸
            const monthlyOvertimeElem = document.getElementById('monthlyOvertime');
            if (remainingOvertimeMinutes > 0) {
                monthlyOvertimeElem.innerHTML = `ğŸ”¥ ì´ë²ˆ ë‹¬ì€ ${remainingOvertimeMinutes}ë¶„ ë” ê·¼ë¬´í•´ì•¼ í•©ë‹ˆë‹¤.<br><span style="font-size:13px;color:#eee;">(ê¸°ë³¸ 8ì‹œê°„/ì¼ ê¸°ì¤€)</span>`;
            } else if (remainingOvertimeMinutes < 0) {
                monthlyOvertimeElem.innerHTML = `ğŸ‰ ì´ë²ˆ ë‹¬ì€ ${Math.abs(remainingOvertimeMinutes)}ë¶„ ëœ ê·¼ë¬´í•´ë„ ë©ë‹ˆë‹¤.<br><span style="font-size:13px;color:#eee;">(ê¸°ë³¸ 8ì‹œê°„/ì¼ ê¸°ì¤€)</span>`;
            } else {
                monthlyOvertimeElem.innerHTML = `â±ï¸ ì´ë²ˆ ë‹¬ì€ ì¶”ê°€ ê·¼ë¬´ê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br><span style="font-size:13px;color:#eee;">(ê¸°ë³¸ 8ì‹œê°„/ì¼ ê¸°ì¤€)</span>`;
            }
            monthlyOvertimeElem.style.color = '#fff';
            monthlyOvertimeElem.style.fontWeight = 'bold';
            monthlyOvertimeElem.style.fontSize = '1.7rem';
            monthlyOvertimeElem.className = '';
            document.getElementById('averageOvertime').style.display = '';
            calculateRemainingAverage(remainingOvertimeMinutes);
            
            const totalHours = Math.floor(totalActualMinutes / 60);
            const totalMin = totalActualMinutes % 60;
            document.getElementById('totalActual').textContent = `${totalHours}ì‹œê°„ ${totalMin}ë¶„`;
            
            const totalDiffElement = document.getElementById('totalDiff');
            const finalDiff = totalActualMinutes - totalTargetMinutes;
            
            if (finalDiff > 0) {
                totalDiffElement.textContent = `+${finalDiff}ë¶„`;
                totalDiffElement.className = 'positive';
            } else if (finalDiff < 0) {
                totalDiffElement.textContent = `${finalDiff}ë¶„`;
                totalDiffElement.className = 'negative';
            } else {
                totalDiffElement.textContent = '0ë¶„';
                totalDiffElement.className = 'zero';
            }
            
            saveAllWorkInputs();
        }

        function resetAll() {
            if (confirm('ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸°í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                initMonthSelect();
                document.getElementById('autoCalculateTarget').checked = true;
                document.getElementById('autoCalculate').checked = true;
                document.getElementById('remainingDays').value = 0;
                calculateAll();
                
                const inputs = document.querySelectorAll('#workTable input');
                inputs.forEach((input, index) => {
                    if (index % 2 === 0) input.value = 8;
                    else input.value = 0;
                });
                calculateTotals();
            }
        }

        // ëª¨ë“  ì €ì¥ëœ ë°ì´í„° ì‚­ì œ
        function clearAllData() {
            if (confirm('ëª¨ë“  ì›”ì˜ ì €ì¥ëœ ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì—ì„œ workingTime_ ìœ¼ë¡œ ì‹œì‘í•˜ëŠ” ëª¨ë“  í‚¤ ì‚­ì œ
                const keysToDelete = [];
                for (let i = 0; i < localStorage.length; i++) {
                    const key = localStorage.key(i);
                    if (key && key.startsWith('workingTime_')) {
                        keysToDelete.push(key);
                    }
                }
                
                keysToDelete.forEach(key => localStorage.removeItem(key));
                
                alert('ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                location.reload(); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
            }
        }

        function initYearSelect() {
            const yearSelect = document.getElementById('targetYear');
            const currentYear = new Date().getFullYear();
            yearSelect.innerHTML = '';
            for (let year = 2025; year <= 2027; year++) {
                const option = document.createElement('option');
                option.value = year;
                option.textContent = year + 'ë…„';
                yearSelect.appendChild(option);
            }
            // í˜„ì¬ ì—°ë„ ìë™ ì„ íƒ
            yearSelect.value = currentYear;
        }

        function initMonthSelect() {
            const monthSelect = document.getElementById('targetMonth');
            const currentMonth = new Date().getMonth() + 1;
            monthSelect.value = currentMonth;
        }

        // í˜ì´ì§€ ë¡œë“œì‹œ í˜„ì¬ ì—°/ì›” ìë™ ì„ íƒ ë° ê³„ì‚° íŠ¸ë¦¬ê±°
        window.addEventListener('DOMContentLoaded', function() {
            initYearSelect();
            initMonthSelect();
            // change ì´ë²¤íŠ¸ ê°•ì œ íŠ¸ë¦¬ê±°ë¡œ ê³„ì‚° ìë™ ì‹¤í–‰
            document.getElementById('targetYear').dispatchEvent(new Event('change'));
            document.getElementById('targetMonth').dispatchEvent(new Event('change'));
        });

        // í˜„ì¬ ë‚ ì§œ ê¸°ì¤€ìœ¼ë¡œ ë‚¨ì€ ê·¼ë¬´ì¼ìˆ˜ ê³„ì‚° í•¨ìˆ˜
        function calculateRemainingWorkdays() {
            const year = parseInt(document.getElementById('targetYear').value);
            const month = parseInt(document.getElementById('targetMonth').value);
            
            // í˜„ì¬ ë‚ ì§œ ê°€ì ¸ì˜¤ê¸°
            const today = new Date();
            const currentYear = today.getFullYear();
            const currentMonth = today.getMonth() + 1;
            const currentDay = today.getDate();
            
            // ì„ íƒëœ ì—°ë„ì™€ ì›”ì´ í˜„ì¬ ë‚ ì§œì™€ ë‹¤ë¥´ë©´ ê³„ì‚°í•˜ì§€ ì•ŠìŒ
            if (year !== currentYear || month !== currentMonth) {
                alert('í˜„ì¬ ì›”ì— ëŒ€í•´ì„œë§Œ ìë™ ê³„ì‚°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.');
                return;
            }
            
            const daysInMonth = new Date(year, month, 0).getDate();
            let remainingDays = 0;
            
            // ì˜¤ëŠ˜ë¶€í„° ì›”ë§ê¹Œì§€ ê·¼ë¬´ì¼ìˆ˜ ê³„ì‚°
            for (let day = currentDay; day <= daysInMonth; day++) {
                const date = new Date(year, month - 1, day);
                const dayOfWeek = date.getDay();
                
                // ì£¼ë§ì´ ì•„ë‹ˆê³  ê³µíœ´ì¼ë„ ì•„ë‹ˆë©´ ê·¼ë¬´ì¼ë¡œ ì¹´ìš´íŠ¸
                if (dayOfWeek !== 0 && dayOfWeek !== 6 && !isHoliday(year, month, day)) {
                    remainingDays++;
                }
            }
            
            document.getElementById('remainingDays').value = remainingDays;
            calculateRemainingAverage(currentMonthlyOvertimeMinutes);
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ìœ¼ë¡œ ë‚¨ì€ ê·¼ë¬´ì¼ìˆ˜ ê³„ì‚°
        function autoCalculateRemainingDays() {
            const today = new Date();
            const selectedYear = parseInt(document.getElementById('targetYear').value);
            const selectedMonth = parseInt(document.getElementById('targetMonth').value);
            
            // í˜„ì¬ ì—°ë„ì™€ ì›”ì´ ì„ íƒë˜ì–´ ìˆë‹¤ë©´ ìë™ ê³„ì‚°
            if (selectedYear === today.getFullYear() && selectedMonth === today.getMonth() + 1) {
                calculateRemainingWorkdays();
            } else {
                // ì´ë²ˆ ë‹¬ì´ ì•„ë‹Œ ê²½ìš°, ì›” ì „ì²´ ê·¼ë¬´ì¼ìˆ˜ë¥¼ ë‚¨ì€ ê·¼ë¬´ì¼ìˆ˜ë¡œ ì„¤ì •
                const workDays = parseInt(document.getElementById('workDays').value) || 0;
                document.getElementById('remainingDays').value = workDays;
                calculateRemainingAverage(currentMonthlyOvertimeMinutes);
            }
        }

        // ë‚¨ì€ ê·¼ë¬´ì¼ìˆ˜ ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜
        function validateRemainingDays() {
            const year = parseInt(document.getElementById('targetYear').value);
            const month = parseInt(document.getElementById('targetMonth').value);
            const daysInMonth = new Date(year, month, 0).getDate();
            
            const remainingDaysInput = document.getElementById('remainingDays');
            const currentValue = parseInt(remainingDaysInput.value) || 0;
            
            // HTML ì†ì„± ì—…ë°ì´íŠ¸
            remainingDaysInput.max = daysInMonth;
            
            // ê°’ì´ ì›”ì˜ ì¼ìˆ˜ë¥¼ ì´ˆê³¼í•˜ë©´ ìµœëŒ€ê°’ìœ¼ë¡œ ì¡°ì •
            if (currentValue > daysInMonth) {
                remainingDaysInput.value = daysInMonth;
            }
            
            // ê°’ì´ ìŒìˆ˜ë©´ 0ìœ¼ë¡œ ì¡°ì •
            if (currentValue < 0) {
                remainingDaysInput.value = 0;
            }
            
            calculateRemainingAverage(currentMonthlyOvertimeMinutes);
        }

        // í˜ì´ì§€ ë¡œë“œ ë° ì›” ë³€ê²½ ì‹œ ë‚¨ì€ ê·¼ë¬´ì¼ìˆ˜ ìµœëŒ€ê°’ ì„¤ì •
        function updateRemainingDaysMax() {
            const year = parseInt(document.getElementById('targetYear').value);
            const month = parseInt(document.getElementById('targetMonth').value);
            const daysInMonth = new Date(year, month, 0).getDate();
            
            const remainingDaysInput = document.getElementById('remainingDays');
            remainingDaysInput.max = daysInMonth;
            
            // í˜„ì¬ ê°’ì´ ìƒˆ ìµœëŒ€ê°’ì„ ì´ˆê³¼í•˜ë©´ ì¡°ì •
            if (parseInt(remainingDaysInput.value) > daysInMonth) {
                remainingDaysInput.value = daysInMonth;
                calculateRemainingAverage(currentMonthlyOvertimeMinutes);
            }
        }

        // ì‹œê°„ ì…ë ¥ ìœ íš¨ì„± ê²€ì‚¬ í•¨ìˆ˜
        function validateTimeInput(inputElement, isHours) {
            let value = parseInt(inputElement.value) || 0;
            
            if (isHours) {
                // ì‹œê°„ì€ 0~24 ë²”ìœ„ë¡œ ì œí•œ
                if (value < 0) value = 0;
                if (value > 24) value = 24;
                inputElement.value = value;
                
                // 24ì‹œê°„ì¸ ê²½ìš° ë¶„ì€ 0ìœ¼ë¡œ ì œí•œ
                if (value === 24) {
                    const minuteInput = inputElement.nextElementSibling.nextElementSibling;
                    if (minuteInput) {
                        minuteInput.value = "00";
                        minuteInput.disabled = true;
                    }
                } else {
                    const minuteInput = inputElement.nextElementSibling.nextElementSibling;
                    if (minuteInput) {
                        minuteInput.disabled = false;
                    }
                }
            } else {
                // ë¶„ì€ 0~59 ë²”ìœ„ë¡œ ì œí•œ
                if (value < 0) value = 0;
                if (value > 59) value = 59;
                
                // ì‹œê°„ì´ 24ì¸ ê²½ìš° ë¶„ì€ 0ìœ¼ë¡œ ê³ ì •
                const hourInput = inputElement.previousElementSibling.previousElementSibling;
                if (hourInput && parseInt(hourInput.value) === 24) {
                    value = 0;
                    inputElement.disabled = true;
                }
                
                // ë‘ ìë¦¬ ìˆ«ìë¡œ í‘œì‹œ (00, 01, 02, ...)
                inputElement.value = value.toString().padStart(2, '0');
            }
            
            calculateTotals();
            saveAllWorkInputs();
        }

        // í…Œì´ë¸” ìƒì„± í›„ ê¸°ì¡´ ì…ë ¥ë€ì— ìœ íš¨ì„± ê²€ì‚¬ ì ìš©
        function applyTimeValidation() {
            const hoursInputs = document.querySelectorAll('.hours-input');
            const minutesInputs = document.querySelectorAll('.minutes-input');
            
            hoursInputs.forEach(input => {
                validateTimeInput(input, true);
            });
            
            minutesInputs.forEach(input => {
                validateTimeInput(input, false);
            });
        }

        // ìˆ˜ë™ ì €ì¥ ê¸°ëŠ¥
        function manualSave() {
            console.log('ìˆ˜ë™ ì €ì¥ ë²„íŠ¼ í´ë¦­ë¨');
            if(saveAllWorkInputs()) {
                const year = document.getElementById('targetYear').value;
                const month = document.getElementById('targetMonth').value;
                const key = getStorageKey(year, month);
                
                // ì €ì¥ í™•ì¸
                const savedData = localStorage.getItem(key);
                if (savedData) {
                    console.log('ìˆ˜ë™ ì €ì¥ ì„±ê³µ:', key);
                    console.log('ì €ì¥ëœ ë°ì´í„° ê¸¸ì´:', savedData.length);
                    alert('í˜„ì¬ ë°ì´í„°ê°€ ë¸Œë¼ìš°ì €ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                } else {
                    const alternativeKey = `monthlyWork_${year}_${month}`;
                    const altData = localStorage.getItem(alternativeKey);
                    if (altData) {
                        console.log('ëŒ€ì²´ í‚¤ë¡œ ì €ì¥ ì„±ê³µ:', alternativeKey);
                        alert('ëŒ€ì²´ ë°©ì‹ìœ¼ë¡œ ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
                    } else if (sessionStorage.getItem(key)) {
                        console.log('ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë¨:', key);
                        alert('ì„¸ì…˜ ìŠ¤í† ë¦¬ì§€ì— ë°ì´í„°ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. (ë¸Œë¼ìš°ì € ë‹«ìœ¼ë©´ ì‚­ì œë¨)');
                    } else {
                        alert('ë°ì´í„° ì €ì¥ ì‹¤íŒ¨! ê°œë°œì ë„êµ¬ ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                    }
                }
            } else {
                alert('ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë¸Œë¼ìš°ì € ì½˜ì†”ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê¸°ëŠ¥ í™•ì¸
        function checkLocalStorage() {
            try {
                const testKey = '_test_storage_';
                localStorage.setItem(testKey, 'test');
                const testResult = localStorage.getItem(testKey);
                localStorage.removeItem(testKey);
                
                if (testResult !== 'test') {
                    console.error('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ê°’ì´ ì¼ì¹˜í•˜ì§€ ì•ŠìŒ');
                    alert('ë¸Œë¼ìš°ì € ì €ì¥ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                    return false;
                }
                
                console.log('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ í…ŒìŠ¤íŠ¸ ì„±ê³µ');
                return true;
            } catch (e) {
                console.error('ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', e);
                alert('ë¸Œë¼ìš°ì € ì €ì¥ ê¸°ëŠ¥ì´ ë¹„í™œì„±í™”ë˜ì–´ ìˆê±°ë‚˜ GitHub Pagesì—ì„œ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                return false;
            }
        }

        addAutoSaveListeners();
        initYearSelect();
        initMonthSelect();
        checkLocalStorage(); // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ ê¸°ëŠ¥ í™•ì¸
        calculateAll();
        if (!loadAllWorkInputs()) {
            console.log('ì €ì¥ëœ ë°ì´í„°ê°€ ì—†ì–´ í…Œì´ë¸”ì„ ìƒˆë¡œ ìƒì„±í•©ë‹ˆë‹¤.');
            updateTable();
        }
        updateRemainingDaysMax(); // ë‚¨ì€ ê·¼ë¬´ì¼ìˆ˜ ìµœëŒ€ê°’ ì´ˆê¸°í™”
    </script>
</body>
</html>